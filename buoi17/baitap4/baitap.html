<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <style>
    #caro {
        width: 100%;
        /*height: 400px;*/
        background-color: #dddddd;
    }
    h1{
        font-family: "Press Start 2P", cursive;
    }
    table {
        border: 1px solid black;
    }
    td {
        border: 1px solid black;
        width: 25px;
        height: 25px;
        text-align: center;
    }
  </style>
</head>
<body>
  <div id="caro">
      <h1>Game Caro</h1>
      <div id="caro1">
          <button onclick="start()">Bắt Đầu</button>
          <button></button>
          <button id="displayPlayer">Người chơi</button>
      </div>
      <div id="result"></div>
  </div>
</body>
</html>
<script>
    let arr = new Array(20);
    let isPlayer = true;
    function start() {
        for (let i = 0; i < arr.length; i++) {
            arr[i] = new Array(20);
            for (let j = 0; j < arr[i].length; j++) {
                arr[i][j] = "";
            }
        }
        display();
    }

    function display() {
        let tableString = `<table>`;
        for (let i = 0; i < 20; i++) {
            tableString += `<tr>`;
            for (let j = 0; j < 20; j++) {
                if (arr[i][j] == "X") {
                    tableString += `<td style="color: red" onclick="play(${i},${j})">${arr[i][j]}</td>`;
                } else {
                    tableString += `<td style="color: blue" onclick="play(${i},${j})">${arr[i][j]}</td>`;
                }
            }
            tableString += `</tr>`;
        }
        tableString += `</table>`
        document.getElementById("result").innerHTML = tableString;
    }
    function play(i, j) {
        if (cellIsEmpty(i,j)) {
            if (isPlayer == true) {
                document.getElementById("displayPlayer").innerText = "Người chơi O";
                arr[i][j] = "X";
                isPlayer = false;
                if (checkWin("X")){
                    alert("X chiến thắng");
                }
            } else {
                document.getElementById("displayPlayer").innerText = "Người chơi X";
                arr[i][j] = "O";
                isPlayer = true;
                if (checkWin("O")){
                    alert("O chiến thắng");
                }
            }
        } else {
            alert("Ô đã đã được đánh. Chọn lại!");
        }
        display();
    }
    function cellIsEmpty(i,j) {
        return arr[i][j] == "";
    }
    function checkWin(value){
        for (let i = 0; i < arr.length; i++) {
            for (let j = 0; j < arr[i].length; j++) {
                let check1 = arr[i][j] === value
                            && arr[i+1][j] === value
                            && arr[i+2][j] === value
                            && arr[i+3][j] === value
                            && arr[i+4][j] === value;
                let check2 = arr[i][j] === value
                            && arr[i][j+1] === value
                            && arr[i][j+2] === value
                            && arr[i][j+3] === value
                            && arr[i][j+4] === value;
                let check3 = arr[i][j] === value
                            && arr[i+1][j+1] === value
                            && arr[i+2][j+2] === value
                            && arr[i+3][j+3] === value
                            && arr[i+4][j+4] === value;
                let check4 = arr[i][j] === value
                            && arr[i+1][j-1] === value
                            && arr[i+2][j-2] === value
                            && arr[i+3][j-3] === value
                            && arr[i+4][j-4] === value;
                if (check1 || check2 || check3 || check4) {
                    return true;
                }
            }
        }
        return false;
    }
</script>
